# Autogenerated Images Implementation Guide

This guide provides step-by-step instructions for implementing autogenerated screenshot integration between openadapt-viewer and openadapt-web.

## Prerequisites

- openadapt-viewer and openadapt-web repositories cloned
- uv installed in openadapt-viewer
- Node.js and npm installed for openadapt-web
- Playwright installed: `uv run playwright install chromium`

## Quick Start (5 Minutes)

### Step 1: Generate Screenshots

```bash
cd /Users/abrichr/oa/src/openadapt-viewer
./scripts/generate_for_web.sh
```

This will:
1. Generate screenshots from available viewers
2. Copy them to openadapt-web/public/images/screenshots/
3. Create a README.md with metadata

### Step 2: Add Component to Landing Page

Edit `/Users/abrichr/oa/src/openadapt-web/pages/index.js`:

```javascript
import ViewerShowcase from '@components/ViewerShowcase'

export default function Home() {
    return (
        <div>
            <MastHead />
            <ViewerShowcase />  {/* ADD THIS LINE */}
            <Developers />
            <IndustriesGrid ... />
            <EmailForm />
            <Footer />
        </div>
    )
}
```

### Step 3: Test Locally

```bash
cd /Users/abrichr/oa/src/openadapt-web
npm run dev
```

Open http://localhost:3000 and verify screenshots appear.

### Step 4: Create Pull Request

```bash
cd /Users/abrichr/oa/src/openadapt-web
git checkout -b add-viewer-showcase
git add components/ViewerShowcase.js
git add components/ViewerShowcase.module.css
git add public/images/screenshots/
git commit -m "Add ViewerShowcase component with autogenerated screenshots"
git push -u origin add-viewer-showcase
gh pr create --title "Add viewer showcase section" --body "Adds ViewerShowcase component displaying autogenerated screenshots from openadapt-viewer"
```

### Step 5: Review and Merge

1. Check Vercel preview deployment
2. Verify images load correctly
3. Test responsive design
4. Merge PR to deploy

## Detailed Implementation Steps

### Phase 1: Initial Setup

#### 1.1 Verify File Structure

Ensure these files exist:

**openadapt-viewer**:
```
/Users/abrichr/oa/src/openadapt-viewer/
├── scripts/
│   ├── generate_for_web.sh (NEW)
│   ├── generate_comprehensive_screenshots.py
│   └── generate_segmentation_screenshots.py
├── segmentation_viewer.html
└── test_episodes.json
```

**openadapt-web**:
```
/Users/abrichr/oa/src/openadapt-web/
├── components/
│   ├── ViewerShowcase.js (NEW)
│   └── ViewerShowcase.module.css (NEW)
├── pages/
│   └── index.js (MODIFY)
└── public/
    └── images/
        └── screenshots/ (NEW, generated)
```

#### 1.2 Test Screenshot Generation

```bash
cd /Users/abrichr/oa/src/openadapt-viewer

# Check dependencies
uv run python scripts/generate_comprehensive_screenshots.py --check-deps

# Test segmentation screenshots (fastest)
uv run python scripts/generate_segmentation_screenshots.py \
    --skip-responsive \
    --output /tmp/test-screenshots

# Verify output
ls -lh /tmp/test-screenshots/
```

#### 1.3 Generate Production Screenshots

```bash
cd /Users/abrichr/oa/src/openadapt-viewer
./scripts/generate_for_web.sh

# Review output
open /Users/abrichr/oa/src/openadapt-web/public/images/screenshots/
```

### Phase 2: Component Integration

#### 2.1 Verify Component Files

Files created:
- `/Users/abrichr/oa/src/openadapt-web/components/ViewerShowcase.js`
- `/Users/abrichr/oa/src/openadapt-web/components/ViewerShowcase.module.css`

#### 2.2 Update Landing Page

Edit `/Users/abrichr/oa/src/openadapt-web/pages/index.js`:

**Before**:
```javascript
export default function Home() {
    return (
        <div>
            <MastHead />
            <Developers />
            <IndustriesGrid ... />
            <EmailForm />
            <Footer />
        </div>
    )
}
```

**After**:
```javascript
import ViewerShowcase from '@components/ViewerShowcase'

export default function Home() {
    return (
        <div>
            <MastHead />
            <ViewerShowcase />  {/* NEW */}
            <Developers />
            <IndustriesGrid ... />
            <EmailForm />
            <Footer />
        </div>
    )
}
```

#### 2.3 Test Locally

```bash
cd /Users/abrichr/oa/src/openadapt-web

# Install dependencies (if needed)
npm install

# Start dev server
npm run dev

# Open browser
open http://localhost:3000
```

Verify:
- [ ] ViewerShowcase section appears
- [ ] Screenshots load correctly
- [ ] Hover effects work
- [ ] Responsive design on mobile
- [ ] Links work correctly

#### 2.4 Test Build

```bash
# Build production version
npm run build

# Check for errors
# Verify image optimization worked
```

### Phase 3: Deployment

#### 3.1 Create Feature Branch

```bash
cd /Users/abrichr/oa/src/openadapt-web
git checkout main
git pull origin main
git checkout -b add-viewer-showcase-$(date +%Y%m%d)
```

#### 3.2 Commit Changes

```bash
# Stage new files
git add components/ViewerShowcase.js
git add components/ViewerShowcase.module.css
git add public/images/screenshots/

# Stage modified files
git add pages/index.js

# Commit
git commit -m "Add ViewerShowcase component with autogenerated screenshots

- Add ViewerShowcase component displaying viewer screenshots
- Add autogenerated screenshots from openadapt-viewer
- Integrate component into landing page
- Add responsive design and hover effects

Screenshots generated from openadapt-viewer using generate_for_web.sh"
```

#### 3.3 Push and Create PR

```bash
# Push branch
git push -u origin add-viewer-showcase-$(date +%Y%m%d)

# Create PR
gh pr create \
    --title "Add viewer showcase section with autogenerated screenshots" \
    --body "## Summary

Adds a new ViewerShowcase component to the landing page displaying autogenerated screenshots from openadapt-viewer.

## Changes

- **NEW**: components/ViewerShowcase.js - React component for viewer showcase
- **NEW**: components/ViewerShowcase.module.css - Styles for showcase component
- **NEW**: public/images/screenshots/ - Autogenerated screenshots
- **MODIFIED**: pages/index.js - Added ViewerShowcase to landing page

## Screenshots

The screenshots are automatically generated from openadapt-viewer using the \`generate_for_web.sh\` script. They showcase:
- Capture Viewer - Recording playback interface
- Segmentation Viewer - Episode library and key frames
- Benchmark Viewer - Performance metrics and analysis

## Testing

- [x] Local development server works
- [x] Production build succeeds
- [x] Images load correctly
- [x] Responsive design works
- [x] No console errors

## Preview

Check the Vercel preview deployment link below."
```

#### 3.4 Review PR

1. Check Vercel preview deployment link (posted automatically)
2. Test on desktop and mobile
3. Check image loading performance
4. Verify no broken images
5. Test all links

#### 3.5 Merge and Deploy

```bash
# After approval, merge PR
gh pr merge --squash

# Pull latest main
git checkout main
git pull origin main

# Verify deployment on https://openadapt.ai
```

### Phase 4: Ongoing Maintenance

#### 4.1 Regenerating Screenshots

When viewer HTML files are updated:

```bash
cd /Users/abrichr/oa/src/openadapt-viewer
./scripts/generate_for_web.sh
cd /Users/abrichr/oa/src/openadapt-web
git checkout -b update-screenshots-$(date +%Y%m%d)
git add public/images/screenshots/
git commit -m "Update autogenerated screenshots"
git push -u origin update-screenshots-$(date +%Y%m%d)
gh pr create --title "Update autogenerated screenshots" --body "Updated screenshots from openadapt-viewer"
```

#### 4.2 Adding New Viewers

To add a new viewer to the showcase:

1. **Generate screenshots** for the new viewer
2. **Update ViewerShowcase.js**:
   ```javascript
   const showcaseItems = [
       // ... existing items
       {
           title: "New Viewer",
           description: "Description of new viewer functionality",
           image: "/images/screenshots/new-viewer/screenshot.png",
           alt: "Description for accessibility",
           features: ["Feature 1", "Feature 2", "Feature 3"]
       }
   ]
   ```
3. **Test and deploy** as usual

#### 4.3 Optimizing Images

If images are too large:

```bash
cd /Users/abrichr/oa/src/openadapt-web/public/images/screenshots

# Install optimization tools
brew install optipng pngquant

# Optimize PNGs
find . -name "*.png" -exec optipng -o7 {} \;

# Or use lossy compression for smaller files
find . -name "*.png" -exec pngquant --quality=80-95 --ext .png --force {} \;
```

## Troubleshooting

### Screenshots Not Generating

**Problem**: `generate_for_web.sh` fails or generates no screenshots.

**Solutions**:
1. Check Playwright installation: `uv run playwright install chromium`
2. Verify HTML files exist: `ls -la /Users/abrichr/oa/src/openadapt-viewer/*.html`
3. Check test data exists: `ls -la /Users/abrichr/oa/src/openadapt-viewer/test_episodes.json`
4. Run with verbose output: `bash -x ./scripts/generate_for_web.sh`

### Images Not Loading in Browser

**Problem**: Screenshots show placeholder or broken image icon.

**Solutions**:
1. Verify images copied correctly:
   ```bash
   ls -la /Users/abrichr/oa/src/openadapt-web/public/images/screenshots/
   ```
2. Check file paths in ViewerShowcase.js match actual filenames
3. Test image URLs directly: http://localhost:3000/images/screenshots/capture/turn-off-nightshift_full.png
4. Check browser console for 404 errors

### Build Fails

**Problem**: `npm run build` fails with image errors.

**Solutions**:
1. Check image file sizes (should be < 5 MB each)
2. Verify all referenced images exist
3. Check Next.js config: `next.config.js`
4. Clear cache: `rm -rf .next && npm run build`

### Vercel Deployment Fails

**Problem**: PR preview deployment fails.

**Solutions**:
1. Check Vercel dashboard for error logs
2. Verify repo size (including images) is under limits
3. Check all dependencies are in `package.json`
4. Test local build: `npm run build`

### Images Too Large

**Problem**: Page loads slowly, images are large.

**Solutions**:
1. Optimize images (see Phase 4.3)
2. Use desktop-only screenshots (skip responsive)
3. Reduce quality in generate script
4. Consider using fewer screenshots per viewer

## Advanced Configuration

### Custom Screenshot Selection

To customize which screenshots are shown, edit `ViewerShowcase.js`:

```javascript
const showcaseItems = [
    {
        title: "Capture Viewer",
        description: "...",
        image: "/images/screenshots/capture/custom-screenshot.png",  // Change this
        // ... rest of config
    }
]
```

### Multiple Screenshots Per Viewer

To show a carousel of screenshots (future enhancement):

```javascript
const showcaseItems = [
    {
        title: "Capture Viewer",
        images: [  // Array of images instead of single image
            "/images/screenshots/capture/full.png",
            "/images/screenshots/capture/controls.png",
            "/images/screenshots/capture/events.png"
        ],
        // ... rest of config
    }
]
```

Then update component to use a carousel library like react-slick.

### Conditional Rendering

To hide viewers without screenshots:

```javascript
export default function ViewerShowcase() {
    const [availableViewers, setAvailableViewers] = useState([])

    useEffect(() => {
        // Filter out viewers with missing images
        const filtered = showcaseItems.filter(item => !item.fallback)
        setAvailableViewers(filtered)
    }, [])

    return (
        <div className={styles.grid}>
            {availableViewers.map((item, index) => (
                // ... render card
            ))}
        </div>
    )
}
```

## Testing Checklist

Before merging PR:

- [ ] Screenshots generated successfully
- [ ] All images < 200 KB each
- [ ] Local dev server works (`npm run dev`)
- [ ] Production build succeeds (`npm run build`)
- [ ] Images load on desktop
- [ ] Images load on mobile
- [ ] Hover effects work
- [ ] Responsive design works
- [ ] No console errors
- [ ] Links work correctly
- [ ] Vercel preview deploys successfully
- [ ] Page load time < 3 seconds
- [ ] Accessibility check passes

## Next Steps

After successful MVP deployment:

1. **Week 2**: Set up GitHub Actions for automated screenshot generation
2. **Month 2**: Add image carousel for multiple screenshots per viewer
3. **Month 3**: Add lightbox for full-screen image viewing
4. **Month 4+**: Plan community gallery architecture

See [AUTOGENERATED_IMAGES.md](./AUTOGENERATED_IMAGES.md) for full roadmap.

## Resources

- [Next.js Image Optimization](https://nextjs.org/docs/basic-features/image-optimization)
- [Playwright Documentation](https://playwright.dev/python/)
- [Vercel Deployment](https://vercel.com/docs)
- [openadapt-viewer CLAUDE.md](../openadapt-viewer/CLAUDE.md)

## Support

For issues or questions:
- Check troubleshooting section above
- Review [AUTOGENERATED_IMAGES.md](./AUTOGENERATED_IMAGES.md)
- Ask in Discord: https://discord.gg/yF527cQbDG
- Create GitHub issue: https://github.com/OpenAdaptAI/openadapt-web/issues
